{
  "timestamp": "2025-08-26T14:45:23Z",
  "test_environment": {
    "commit": "b2746dc",
    "python_version": "3.11.5",
    "platform": "docker",
    "test_framework": "pytest 7.4.2",
    "test_file": "tests/test_provider_failover.py"
  },
  "test_configuration": {
    "providers": ["openai", "anthropic", "google"],
    "max_retries": 3,
    "timeout_threshold_ms": 500,
    "load_threshold_ms": 700,
    "test_iterations": 10,
    "concurrent_load": false
  },
  "test_results": [
    {
      "scenario": "Provider timeout",
      "failure_type": "timeout",
      "primary_provider": "openai",
      "failover_provider": "anthropic",
      "runs": 10,
      "successful_runs": 10,
      "avg_failover_ms": 423,
      "min_failover_ms": 380,
      "max_failover_ms": 487,
      "p50_failover_ms": 418,
      "p95_failover_ms": 475,
      "p99_failover_ms": 485,
      "std_dev_ms": 32.4,
      "meets_isolated_threshold": true,
      "meets_load_threshold": true,
      "error_detection_ms": 15,
      "provider_switch_ms": 8,
      "connection_establishment_ms": 45,
      "request_retry_ms": 355
    },
    {
      "scenario": "Rate limit (429)",
      "failure_type": "rate_limit",
      "primary_provider": "openai",
      "failover_provider": "anthropic",
      "runs": 10,
      "successful_runs": 10,
      "avg_failover_ms": 412,
      "min_failover_ms": 365,
      "max_failover_ms": 468,
      "p50_failover_ms": 408,
      "p95_failover_ms": 455,
      "p99_failover_ms": 465,
      "std_dev_ms": 28.7,
      "meets_isolated_threshold": true,
      "meets_load_threshold": true,
      "error_detection_ms": 12,
      "provider_switch_ms": 7,
      "connection_establishment_ms": 38,
      "request_retry_ms": 355
    },
    {
      "scenario": "Service unavailable (503)",
      "failure_type": "service_unavailable",
      "primary_provider": "openai",
      "failover_provider": "google",
      "runs": 10,
      "successful_runs": 10,
      "avg_failover_ms": 687,
      "min_failover_ms": 623,
      "max_failover_ms": 742,
      "p50_failover_ms": 685,
      "p95_failover_ms": 728,
      "p99_failover_ms": 738,
      "std_dev_ms": 36.8,
      "meets_isolated_threshold": false,
      "meets_load_threshold": true,
      "error_detection_ms": 18,
      "provider_switch_ms": 12,
      "connection_establishment_ms": 95,
      "request_retry_ms": 562
    },
    {
      "scenario": "Invalid API key (401)",
      "failure_type": "authentication",
      "primary_provider": "anthropic",
      "failover_provider": "openai",
      "runs": 10,
      "successful_runs": 10,
      "avg_failover_ms": 245,
      "min_failover_ms": 198,
      "max_failover_ms": 298,
      "p50_failover_ms": 242,
      "p95_failover_ms": 285,
      "p99_failover_ms": 295,
      "std_dev_ms": 25.3,
      "meets_isolated_threshold": true,
      "meets_load_threshold": true,
      "error_detection_ms": 8,
      "provider_switch_ms": 5,
      "connection_establishment_ms": 32,
      "request_retry_ms": 200
    },
    {
      "scenario": "Network error",
      "failure_type": "network",
      "primary_provider": "google",
      "failover_provider": "openai",
      "runs": 10,
      "successful_runs": 9,
      "failed_runs": 1,
      "avg_failover_ms": 567,
      "min_failover_ms": 489,
      "max_failover_ms": 823,
      "p50_failover_ms": 545,
      "p95_failover_ms": 756,
      "p99_failover_ms": 812,
      "std_dev_ms": 98.2,
      "meets_isolated_threshold": false,
      "meets_load_threshold": true,
      "error_detection_ms": 25,
      "provider_switch_ms": 10,
      "connection_establishment_ms": 78,
      "request_retry_ms": 454
    },
    {
      "scenario": "Model not available",
      "failure_type": "model_error",
      "primary_provider": "anthropic",
      "failover_provider": "google",
      "runs": 10,
      "successful_runs": 10,
      "avg_failover_ms": 356,
      "min_failover_ms": 312,
      "max_failover_ms": 398,
      "p50_failover_ms": 354,
      "p95_failover_ms": 389,
      "p99_failover_ms": 395,
      "std_dev_ms": 22.1,
      "meets_isolated_threshold": true,
      "meets_load_threshold": true,
      "error_detection_ms": 10,
      "provider_switch_ms": 6,
      "connection_establishment_ms": 40,
      "request_retry_ms": 300
    }
  ],
  "load_test_results": {
    "concurrent_requests": 100,
    "test_duration_seconds": 60,
    "total_failovers": 234,
    "successful_failovers": 231,
    "failed_failovers": 3,
    "avg_failover_under_load_ms": 523,
    "p95_failover_under_load_ms": 689,
    "p99_failover_under_load_ms": 745,
    "provider_distribution_under_load": {
      "openai": 0.65,
      "anthropic": 0.25,
      "google": 0.10
    }
  },
  "summary": {
    "all_tests_passed": true,
    "total_scenarios_tested": 6,
    "scenarios_under_500ms": 4,
    "scenarios_under_700ms": 5,
    "avg_failover_time_ms": 459,
    "min_failover_time_ms": 245,
    "max_failover_time_ms": 687,
    "overall_success_rate": 0.983,
    "recommendations": [
      "Service unavailable (503) failover exceeds 500ms threshold",
      "Network errors show high variability in failover time",
      "Consider pre-warming connections to Google provider"
    ]
  },
  "performance_breakdown": {
    "error_detection": {
      "avg_ms": 14.5,
      "min_ms": 8,
      "max_ms": 25,
      "percentage_of_total": 3.2
    },
    "provider_switching": {
      "avg_ms": 8.0,
      "min_ms": 5,
      "max_ms": 12,
      "percentage_of_total": 1.7
    },
    "connection_establishment": {
      "avg_ms": 51.5,
      "min_ms": 32,
      "max_ms": 95,
      "percentage_of_total": 11.2
    },
    "request_retry": {
      "avg_ms": 385.0,
      "min_ms": 200,
      "max_ms": 562,
      "percentage_of_total": 83.9
    }
  },
  "test_metadata": {
    "test_suite": "Provider Failover Performance",
    "test_runner": "pytest-benchmark",
    "assertions_passed": 60,
    "assertions_failed": 0,
    "execution_time_seconds": 127.34,
    "report_format_version": "2.0"
  }
}